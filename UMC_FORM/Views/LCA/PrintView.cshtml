@model UMC_FORM.Models.LCA.LCADetailModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard - SB Admin</title>
    <link href="~/Content/css/styles.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"
            crossorigin="anonymous"></script>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <link href="~/Content/css/pdf.css" rel="stylesheet" />
    <style>
        table, td, th {
            border: 1px solid black;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        body, html {
            font-family: Arial;
            font-size: 9px !important;
        }
    </style>
</head>

<body class="container-fluid">

    <!--Form nhập request-->
    <div>
        <div class="row">
            <h3 class="">GIẤY YÊU CẦU PHÒNG CƠ KHÍ  冶工具　加工依頼書</h3>
            <label class="col lang text-right"></label>
            <label class="col text-right font-weight-bold">ID :  @Model.TICKET.LCA_ID</label>
        </div>


        <div class="card-body border border-dark pt-1">
            <div class="row">
                <span class="text-uppercase lang font-weight-bold" style="font-size:10px;">
                    ①	Bộ phận yêu cầu 依頼部門
                </span>

                <table class=" ">
                    <tr class="">
                        <td class="lang text-center" key="">
                            Bộ phận yêu cầu
                            <br />
                            依頼部門
                        </td>
                        <td class="text-center " style="vertical-align: middle;" colspan="2">@Model.TICKET.DEPT</td>
                        <td class="lang   text-center">
                            Ngày yêu cầu
                            <br />
                            依頼日
                        </td>
                        <td class="text-center " style="vertical-align: middle;">@Html.DisplayFor(m => m.TICKET.REQUEST_DATE)</td>
                        <td class="lang text-center">
                            Ngày mong muốn
                            <br />
                            渡し希望日
                        </td>
                        <td class="text-center" style="vertical-align: middle;" colspan="2">@Html.DisplayFor(m => m.TICKET.TARGET_DATE)</td>
                    </tr>
                    <tr class="">
                        <td class=""><label class=" lang text-left">Mục đích yêu cầu（目的）</label></td>
                        <td class="text-center font-weight-bold">活人</td>
                        <td class="text-center font-weight-bold" colspan="2">必要物(ない場合、生産不可能）</td>
                        <td class="text-center font-weight-bold" colspan="2">品質&５S改善</td>
                        <td class="text-center font-weight-bold" colspan="2">NGチェンジ</td>
                    </tr>
                    <tr>
                        <td class="" rowspan="2" style="vertical-align: middle;">
                            <label class="font-weight-bold lang text-left center">
                                治具の分類
                                <br />
                                Phân loại Jig
                            </label>
                        </td>
                        <td class="text-center  lang">
                            Tăng năng suất
                            <br />
                            (生産性UP)
                        </td>
                        <td class="text-center  lang">
                            Model mới
                            <br />
                            (new model)
                        </td>
                        <td class="text-center lang">
                            Do tăng sản lượng
                            <br />
                            増産
                        </td>
                        <td class="text-center  lang">
                            Cải tiến C/Lượng
                            <br />
                            品質改善
                        </td>
                        <td class="text-center  lang" key="5s">5S改善</td>
                        <td class="text-center  lang" colspan="2">
                            JIG bị mòn/NG
                            <br />
                            NG JIGチェンジ
                        </td>

                    </tr>

                    <tr>
                        <td class="text-center p-2" name="increase_productivity" id="select_target_1"></td>
                        <td class="text-center p-2" name="new_model" id="select_target_2"></td>
                        <td class="text-center p-2" name="incre_prod" id="select_target_3"></td>
                        <td class="text-center p-2" name="quantity" id="select_target_4"></td>
                        <td class="text-center p-2" name="5s" id="select_target_5"></td>
                        <td class="text-center p-2" colspan="2" name="ngjig" id="select_target_5"></td>
                        @Html.HiddenFor(m => m.TICKET.REQUEST_TARGET)
                        <script>
                            $(function () {
                                var target = $('#TICKET_REQUEST_TARGET').val()
                                var arrTarget = target.split(',')
                                for (var i = 1; i <= 6; i++) {
                                    var select = $('#select_target_' + i).attr('name')
                                    if (arrTarget.includes(select)) {
                                        var icon = $('<i/>', {
                                            class: 'fas fa-check'
                                        })
                                        $('#select_target_' + i).append(icon)
                                    } else {
                                        $('#select_target_' + i).empty()
                                    }
                                }
                            })

                        </script>
                    </tr>
                    <tr class="font-weight-bold">
                        <td class="text-center" rowspan="5" style="vertical-align: middle;">

                            効果
                            <br />
                            ■Ước lượng hiệu quả
                            khi áp dụng mới

                        </td>
                        <td class="text-center lang" colspan="2">Cắt giảm người　(活人効果）</td>
                        <td class="text-center lang" colspan="3">Hiệu quả cải tiến chất lượng (品質改善効果）</td>
                        <td class="text-center  lang" colspan="2">
                            Tiết kiệm chi phí
                            (金効果)
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" style="vertical-align: middle;" class="text-center">@Html.DisplayFor(m => m.TICKET.DECREASE_PERSON)</td>
                        <td style="vertical-align: middle;" class="text-center font-weight-bold" rowspan="3">人/月</td>
                        <td class="" style="vertical-align: middle;">
                            <label class="font-weight-bold lang text-left center">
                                Nội dung Lỗi:
                                <br />
                                (不良内容）
                            </label>

                        </td>
                        <td colspan="2" style="vertical-align: middle;">@Html.DisplayFor(m => m.TICKET.CONTENT_ERROR)</td>
                        <td rowspan="3" style="vertical-align: middle;" class="text-center">@Html.DisplayFor(m => m.TICKET.COST_SAVING)</td>
                        <td rowspan="3" style="vertical-align: middle;" class="text-center font-weight-bold">USD/月</td>

                    </tr>
                    <tr>
                        <td class="" style="vertical-align: middle;"><label class="font-weight-bold lang text-left center">Tỉ lệ lỗi hiện tại（現在不良率):</label></td>
                        <td colspan="2">@Html.DisplayFor(m => m.TICKET.ERROR_RATE_CURRENT)</td>

                    </tr>
                    <tr>
                        <td class="" style="vertical-align: middle;">
                            <label class="font-weight-bold lang text-left center">
                                Hiệu quả cải tiến（改善効果):
                            </label>
                        </td>
                        <td colspan="2">@Html.DisplayFor(m => m.TICKET.IMPROVED_EFICIENCY)</td>
                    </tr>
                    <tr>
                        <td class="font-weight-bold">Other:</td>
                        <td colspan="6">@Html.DisplayFor(m => m.TICKET.OTHER)</td>
                    </tr>
                    <tr>
                        <td class="">
                            <label class="font-weight-bold lang">5. 支払■Chi trả:</label>
                        </td>
                        <td colspan="7" class="p-2">
                            <label class="lang mr-2" key="Customer"></label>
                            <i id="customer" class="fas fa-check d-none"></i>
                            <label class="lang mr-2 ml-5" key="">UMCVN</label>
                            <i id="umcvn" class="fas fa-check d-none"></i>
                            @Html.HiddenFor(m => m.TICKET.PAYER)
                        </td>
                        <script>
                            $(function () {
                                var payer = $('#TICKET_PAYER').val()
                                if (payer == "UMCVN") {
                                    $('#umcvn').removeClass('d-none')
                                } else if (payer == "Customer") {
                                    $('#customer').removeClass('d-none')
                                }
                            })

                        </script>

                    </tr>

                </table>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <div class="row">
                        <div class="col">
                            <div class="lang">1. 利用■Đối tượng áp dụng:</div>

                        </div>
                        <div class="col ">
                            <span>PCB: </span>
                            @Html.DisplayFor(m => m.TICKET.PCB)
                        </div>
                    </div>
                    <br />
                    <div class="row">

                        <div class="col ">
                            <span class="lang">顧客■Khách hàng: </span>
                            @Html.DisplayFor(m => m.TICKET.CUSTOMER)
                        </div>
                        <div class="col ">
                            <span>Model: </span>
                            @Html.DisplayFor(m => m.TICKET.MODEL)
                        </div>
                    </div>
                    <br />
                    <div class="row ml-1">
                        <p>
                            内容■　Nội dung yêu cầu: (Phải thêm comment tiếng Anh/ tiếng Nhật)
                            <br />
                            <span class="font-weight-bold">(MUST : Please add comment by English or Japanese)</span>
                        <p></p>
                    </div>
                    <div class="row ml-1">
                        <p style="white-space: pre-wrap"> @Html.DisplayFor(m => m.TICKET.REQUEST_CONTENT)</p>
                    </div>
                </div>
                <div class="col-4">
                    <table class="mt-2 ">
                        <tr>
                            <td class="p-2">1. Người yêu cầu/担当 </td>
                            <td class="p-2">2. Phê duyệt/承認</td>

                        </tr>

                        <tbody>
                            <tr height="100px">

                                @for (var a = 0; a < 2; a++)
                                {
                                    var station = Model.STATION_APPROVE[a];
                                    if (station.IS_APPROVED)
                                    {
                                        <td>
                                            <div class="rubber_stamp">
                                                <p>@station.COMPANY</p>
                                                <p>@station.APPROVE_DATE.ToShortDateString()</p>
                                                <p>@station.APPROVER</p>
                                            </div>
                                        </td>
                                    }
                                    else
                                    {
                                        <td></td>
                                    }

                                }

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="border card-body border-dark">

            <div class="row">
                <p class="text-uppercase lang font-weight-bold mb-4 col-7" style="font-size:15px;">
                    ②LCA 「見積もり] /Báo giá, Leadtime
                    <br />
                    見積もり作成⇒Jig作成実施可能承認
                </p>
                <label class="col lang text-right">受付日／Ngày nhận: <span>@Html.DisplayFor(m => m.TICKET.RECEIVE_DATE)</span></label>
                <label class="lang col text-right">Lead time: <span>@Html.DisplayFor(m => m.TICKET.LEAD_TIME)</span><br /><span class="font-italic">(After get approval from GD)</span></label>
            </div>
            <div class="table-responsive">
                <table class="table-border-dark">
                    <tr>
                        <th class="lang" key="table-no" rowspan="2" align="center">No</th>
                        <th class="lang" key="table-item-req" width="300px" rowspan="2">Item name</th>
                        <th class="lang" key="table-qty" rowspan="2">Qty</th>
                        <th class="lang" key="" colspan="2">LCA Material Cost (USD)</th>
                        <th class="lang" key="" colspan="2">Customer charge (USD)</th>
                    </tr>
                    <tr>

                        <td class="lang text-center" width="">Unit price</td>
                        <td class="lang text-center" width="">Total cost</td>
                        <td class="lang text-center" width="">Unit price</td>
                        <td class="lang text-center" width="">Total cost</td>

                    </tr>

                    <tbody id="tableInfo">
                        @{
                            var i = 1;
                            foreach (var quote in Model.TICKET.LCA_QUOTEs)
                            {
                                <tr class="row-info">
                                    <td>@(i)</td>
                                    <td><input class="form-input inputDefault bg-white" name=@("ITEM_NAME_" + i) id=@("ITEM_NAME_" + i) value="@quote.REQUEST_ITEM" readonly /></td>
                                    <td><input class="form-input type_number inputDefault bg-white" id=@("QTY_" + i) value="@quote.QUANTITY.ToString("#,##0")" readonly /> </td>
                                    <td><input class="form-input type_number inputDefault bg-white" id=@("UNIT_PRICE_LCA_" + i) value="@quote.LCA_UNIT_PRICE.ToString("#,##0")" readonly /> </td>
                                    <td><input class="form-input type_number inputDefault bg-white" id=@("TOTAL_LCA_" + i) value="@quote.LCA_TOTAL_COST.ToString("#,##0")" readonly />  </td>
                                    <td><input class="form-input type_number inputDefault bg-white" id=@("UNIT_PRICE_CUSTOMER_" + i) value="@quote.CUSTOMER_UNIT_PRICE.ToString("#,##0")" readonly /> </td>
                                    <td><input class="form-input type_number inputDefault bg-white" id=@("TOTAL_CUSTOMER_" + i) value="@quote.CUSTOMER_TOTAL_COST.ToString("#,##0")" readonly /></td>
                                </tr>
                                i++;
                            }

                        }

                        <tr class="p-3 summary">
                            <td class="border-0 font-italic" colspan="3">
                                * If request Items are over 5, please issue more request sheet
                            </td>
                            <td class="border-0 font-weight-bold" colspan="2">
                                <div class="text-right">
                                    <span class="">Total:</span>
                                    <span class="totalLCA">100</span>
                                    <span class="">$</span>
                                </div>

                            </td>
                            <td class="border-0 font-weight-bold text-right" colspan="2">
                                <span class="">Total:</span>
                                <span class="totalCustomer">100</span>
                                <span class="">$</span>
                            </td>
                        </tr>

                    </tbody>
                </table>

            </div>
            <div class="table-responsive">
                <table class="table table-bordered ">
                    <thead>
                        <tr>
                            @{
                                var index = 1;
                            }
                            @foreach (var station in Model.STATION_APPROVE)
                            {
                                if (index < 3)
                                {
                                    index++;
                                    continue;
                                }
                                <th class="font-italic lang" rowspan="2"><span>@(index++ + ". ")</span><span class="lang" key="@station.STATION_NAME">@station.STATION_NAME</span></th>
                            }
                        </tr>

                    </thead>
                    <tbody>
                        <tr height="100px">
                            @{
                                index = 1;
                            }
                            @foreach (var station in Model.STATION_APPROVE)
                            {
                                if (index < 3)
                                {
                                    index++;
                                    continue;
                                }
                                if (station.IS_APPROVED)
                                {
                                    <td>
                                        <div class="rubber_stamp">
                                            <p>@station.COMPANY</p>
                                            <p>@station.APPROVE_DATE.ToShortDateString()</p>
                                            <p>@station.APPROVER</p>
                                        </div>
                                    </td>
                                }
                                else
                                {
                                    <td></td>
                                }

                            }

                        </tr>
                    </tbody>
                </table>

            </div>


            <div class="row ml-1">
                <p class="font-weight-bold text-underline ">Comment:</p>
                <p>
                    @if (Model.LIST_COMMENT != null && Model.LIST_COMMENT.Count() > 0)
                    {

                        foreach (var comment in Model.LIST_COMMENT)
                        {

                            <span class=" font-weight-bold">@comment.COMMENT_USER</span>
                            <br />
                            @comment.COMMENT_DETAIL
                            <br />
                            <br />

                        }



                    }
                    @if (!string.IsNullOrEmpty(Model.TICKET.COMMENT))
                    {
                    <span class=" font-weight-bold">@Model.TICKET.SUBMIT_USER</span>
                    <br />
                    @Model.TICKET.COMMENT
                    <br />
                    <br />
                    }
                </p>


                </div>
            <br />
            <div class="col">
                <p class="font-italic font-weight-bold row text-underline">Note</p>
                <span class="border p-2 row">
                    1. LCA chỉ bắt đầu triển khai thực hiện sau khi giấy yêu cầu nhận được phê duyệt cuối cùng từ Tổng Giám Đốc
                    <br />
                    作成依頼は100% 社長が承認します。注意してお願い致します。
                    <br />
                    2. Trường hợp khách hàng trả Tiền thì phải được xác nhận từ bộ phận BC
                </span>
            </div>
            <br />
            <h5 class="text-uppercase lang font-weight-bold mb-4" key="">③ Biểu kiểm tra dụng cụ の書式にて完成品の確認　（Xác nhận Jig　治具確認）</h5>
            <p>
                Sử dụng "Biểu kiểm tra Jig,Pallet trước khi sử dụng" mã số: F06-PR.ACC.01-**
                <br />
                治工具運用前のチェックシートを使う：F06-PR.ACC.01-**

            </p>

        </div>
    </div>
    <script src="~/Content/js/moment.js"></script>
    <script src="~/Content/js/lang.js"></script>
    <script src="~/Content/js/form_common.js"></script>
    <script src="~/Content/js/lca/form_lca.js"></script>

</body>

</html>